{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./loginPage.css';import logo from'../../styles/icons/logo.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(props){const navigate=useNavigate();const[credentials,setCredentials]=useState({email:'',lozinka:''});const[error,setError]=useState(false);const handleChange=e=>{const{id,value}=e.target;setCredentials({...credentials,[id]:value});};const handleSubmit=async e=>{e.preventDefault();try{setError(false);const response=await fetch('http://localhost:3000/users/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});if(response.ok){const data=await response.json();props.loginUser(data);localStorage.setItem('user',JSON.stringify(data));navigate('/');}else{setError(true);throw new Error('Failed to login');}}catch(error){console.error('Login error:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center align-items-center vh-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center logo\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Wedease Logo\",className:\"mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"card-title headerLogin\",children:\"Wedease\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control \".concat(error?'error':''),id:\"email\",placeholder:\"Email\",value:credentials.email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control \".concat(error?'error':''),id:\"lozinka\",placeholder:\"Lozinka\",value:credentials.lozinka,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"loginBtn btn\",children:\"Prijava\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bottomBtns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn hipperLink gostBtn\",onClick:()=>navigate('/loginGost'),children:\"Gost\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn hipperLink\",onClick:()=>navigate('/singup'),children:\"Izradite korisni\\u010Dki ra\\u010Dun\"})]})})]})});}","map":{"version":3,"names":["React","useState","useNavigate","logo","jsx","_jsx","jsxs","_jsxs","LoginPage","props","navigate","credentials","setCredentials","email","lozinka","error","setError","handleChange","e","id","value","target","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","loginUser","localStorage","setItem","Error","console","className","children","src","alt","onSubmit","type","concat","placeholder","onChange","required","onClick"],"sources":["C:/Projekt/projekt1/frontend/src/pages/loginPage/loginPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './loginPage.css';\r\nimport logo from '../../styles/icons/logo.png';\r\n\r\nexport default function LoginPage(props) {\r\n  const navigate = useNavigate();\r\n  const [credentials, setCredentials] = useState({\r\n    email: '',\r\n    lozinka: '',\r\n  });\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { id, value } = e.target;\r\n    setCredentials({ ...credentials, [id]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setError(false);\r\n      const response = await fetch('http://localhost:3000/users/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        props.loginUser(data);\r\n        localStorage.setItem('user', JSON.stringify(data));\r\n\r\n        navigate('/');\r\n      } else {\r\n        setError(true);\r\n        throw new Error('Failed to login');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container'>\r\n      <div className='row justify-content-center align-items-center vh-100'>\r\n        <div className='text-center logo'>\r\n          <img src={logo} alt='Wedease Logo' className='mb-4' />\r\n          <h2 className='card-title headerLogin'>Wedease</h2>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className='mb-3'>\r\n            <input\r\n              type='text'\r\n              className={`form-control ${error ? 'error' : ''}`}\r\n              id='email'\r\n              placeholder='Email'\r\n              value={credentials.email}\r\n              onChange={handleChange}\r\n       \r\n              required\r\n            />\r\n          </div>\r\n          <div className='mb-3'>\r\n            <input\r\n              type='password'\r\n              className={`form-control ${error ? 'error' : ''}`}\r\n              id='lozinka'\r\n              placeholder='Lozinka'\r\n              value={credentials.lozinka}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className='d-grid'>\r\n            <button type='submit' className='loginBtn btn'>\r\n              Prijava\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div className='text-center bottom'>\r\n          <div className='bottomBtns'>\r\n\r\n        <div className='btn hipperLink gostBtn' onClick={() => navigate('/loginGost')}>\r\n            Gost\r\n          </div>\r\n          <div className='btn hipperLink' onClick={() => navigate('/singup')}>\r\n            Izradite korisnički račun\r\n          </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}