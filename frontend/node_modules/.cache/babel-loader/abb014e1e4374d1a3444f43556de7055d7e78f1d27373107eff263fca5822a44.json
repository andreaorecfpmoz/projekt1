{"ast":null,"code":"import React,{useEffect,useState}from'react';import Navbar from'../../components/navigation/navbar';import'./seatingArrangementPage.css';import TableComponent from'../../components/tableComponent/tableComponent';import AddTable from'./addTable';import ChooseSalon from'../../components/chooseSalon/chooseSalon';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SeatingArrangementPage(props){const[editTable,setEditTable]=useState();const[addTable,setAddTable]=useState(false);const[svadbeniSalon,setSvadbeniSalon]=useState(false);const[tables,setTables]=useState([]);const[rezervation,setReservation]=useState();useEffect(()=>{if(!props.autentification.isAdmin){var _user$user;const userLocalStorage=localStorage.getItem('user');const user=JSON.parse(userLocalStorage);const userId=props.autentification.isNewlyweds?user===null||user===void 0?void 0:(_user$user=user.user)===null||_user$user===void 0?void 0:_user$user.id:props.autentification.isGuest&&user.user.brojPozivnice;const fetchReservations=async()=>{try{const response=await fetch(\"http://wedease.studenti.sum.ba/rezervacije/get/korisnik/\".concat(userId));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const reservations=await response.json();console.log(reservations);setReservation(reservations);}catch(error){console.error('Error fetching reservations for user',error);}};fetchReservations();}},[props.autentification.isNewlyweds]);const editBtnHandler=table=>{setEditTable(table);setAddTable(false);};const onAddTableHandler=()=>{setAddTable(!addTable);setEditTable(null);};const backFromTableMenagment=async table=>{const oldTable=tables.find(t=>{var _table$;return t.IDStola===((_table$=table[0])===null||_table$===void 0?void 0:_table$.IDStola);});if(table&&!oldTable){try{const response=await fetch('http://wedease.studenti.sum.ba/stolovi/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:table[0].ImeStola,seats:table[0].BrojStolica,idSalona:svadbeniSalon.IDSalona})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();const tableData=data.table;if(tableData){setTables(prevTables=>[...prevTables,tableData]);}}catch(error){console.error('There was an error!',error);}}if(oldTable){try{const response=await fetch(\"http://wedease.studenti.sum.ba/stolovi/edit/\".concat(oldTable.IDStola),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:table[0].ImeStola,seats:table[0].BrojStolica,idSalona:svadbeniSalon.IDSalona})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();const tableData=data.table;if(tableData){setTables(prevTables=>prevTables.map(table=>{if(table.IDStola===oldTable.IDStola){return tableData;}return table;}));}}catch(error){console.error('Error during update:',error);}}setAddTable(false);setEditTable(null);};const onReserveSeats=async(tableId,reservedSeats)=>{const updatedTables=tables.map(table=>{if(table.IDStola===tableId){const updatedGuests=table.guests?[...table.guests]:[];Object.entries(reservedSeats).forEach(_ref=>{let[key,name]=_ref;const seat=parseInt(key.split('-')[1],10);const guestIndex=updatedGuests.findIndex(guest=>guest.seat===seat);if(guestIndex!==-1){updatedGuests[guestIndex].name=name;}else{updatedGuests.push({name,seat});}});return{...table,guests:updatedGuests};}return table;});setTables(updatedTables);const res=[];updatedTables.forEach(table=>{if(table.IDStola===tableId){table.guests.forEach(guest=>{res.push({IDStola:tableId,IDSvadbe:rezervation[0].IDRezervacije,ImeKorisnika:guest.name,BrojStolice:guest.seat});});}});try{const response=await fetch('http://wedease.studenti.sum.ba/stolice/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(res)});if(!response.ok){throw new Error('Network response was not ok.');}const data=await response.json();}catch(error){console.error('There was a problem with the fetch operation:',error);}};async function getSalon(salonID){setSvadbeniSalon(salonID);try{const response=await fetch(\"http://wedease.studenti.sum.ba/stolovi/get/\".concat(salonID.IDSalona));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setTables(data);}catch(error){console.error('Could not fetch the data',error);}}useEffect(()=>{const fetchTablesData=async()=>{if(rezervation&&rezervation.length>0){try{const tablesResponse=await fetch(\"http://wedease.studenti.sum.ba/stolovi/get/rezervedTables/\".concat(rezervation[0].IDRezervacije));if(!tablesResponse.ok){throw new Error(\"HTTP error! status: \".concat(tablesResponse.status));}const tables=await tablesResponse.json();const tablesDetailsPromises=tables.map(table=>fetch(\"http://wedease.studenti.sum.ba/stolovi/getTablesById/\".concat(table.IDStola)).then(res=>res.json()));const detailedTables=await Promise.all(tablesDetailsPromises);const guestsResponse=await fetch(\"http://wedease.studenti.sum.ba/stolice/get/\".concat(rezervation[0].IDRezervacije));if(guestsResponse.ok){const tablesData=await guestsResponse.json();const tablesGuestsMap={};tablesData.forEach(reservation=>{if(!tablesGuestsMap[reservation.IDStola]){tablesGuestsMap[reservation.IDStola]=[];}tablesGuestsMap[reservation.IDStola].push({name:reservation.ImeKorisnika,seat:reservation.BrojStolice});});const updatedTables=detailedTables.map(table=>{return{...table[0],guests:tablesGuestsMap[table[0].IDStola]||[]};});setTables(updatedTables);}else{console.log(detailedTables);setTables(...detailedTables);}}catch(error){console.error('Error fetching tables data',error);}}};if(rezervation){fetchTablesData();}},[rezervation]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{autentification:props.autentification,logoutUser:props.logoutUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"containerSeatingArragment\",children:[props.autentification.isAdmin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chooseSalonFlex\",children:/*#__PURE__*/_jsx(ChooseSalon,{getSalon:getSalon})}),svadbeniSalon&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\" addTableButton\",onClick:onAddTableHandler,disabled:editTable,children:\"Dodaj stol\"}),(editTable||addTable)&&/*#__PURE__*/_jsx(AddTable,{table:editTable,backFromTableMenagment:backFromTableMenagment})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:tables===null||tables===void 0?void 0:tables.map(table=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 col-md-6 col-sm-12 mb-10 arragmentSeat\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"seatingArragmentCardHeader\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title tableTitle\",children:table.ImeStola}),props.autentification.isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"seatingArragmentEditBtn\",onClick:()=>editBtnHandler(table),disabled:addTable,children:\"Uredi\"})]}),/*#__PURE__*/_jsx(TableComponent,{table:table,onReserveSeats:onReserveSeats})]})})});})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Navbar","TableComponent","AddTable","ChooseSalon","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SeatingArrangementPage","props","editTable","setEditTable","addTable","setAddTable","svadbeniSalon","setSvadbeniSalon","tables","setTables","rezervation","setReservation","autentification","isAdmin","_user$user","userLocalStorage","localStorage","getItem","user","JSON","parse","userId","isNewlyweds","id","isGuest","brojPozivnice","fetchReservations","response","fetch","concat","ok","Error","status","reservations","json","console","log","error","editBtnHandler","table","onAddTableHandler","backFromTableMenagment","oldTable","find","t","_table$","IDStola","method","headers","body","stringify","name","ImeStola","seats","BrojStolica","idSalona","IDSalona","data","tableData","prevTables","map","onReserveSeats","tableId","reservedSeats","updatedTables","updatedGuests","guests","Object","entries","forEach","_ref","key","seat","parseInt","split","guestIndex","findIndex","guest","push","res","IDSvadbe","IDRezervacije","ImeKorisnika","BrojStolice","getSalon","salonID","fetchTablesData","length","tablesResponse","tablesDetailsPromises","then","detailedTables","Promise","all","guestsResponse","tablesData","tablesGuestsMap","reservation","children","logoutUser","className","type","onClick","disabled"],"sources":["C:/Projekt/projekt1/frontend/src/pages/seatingArrangementPage/seatingArrangementPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Navbar from '../../components/navigation/navbar';\r\nimport './seatingArrangementPage.css';\r\nimport TableComponent from '../../components/tableComponent/tableComponent';\r\nimport AddTable from './addTable';\r\nimport ChooseSalon from '../../components/chooseSalon/chooseSalon';\r\n\r\nexport default function SeatingArrangementPage(props) {\r\n  const [editTable, setEditTable] = useState();\r\n  const [addTable, setAddTable] = useState(false);\r\n  const [svadbeniSalon, setSvadbeniSalon] = useState(false);\r\n  const [tables, setTables] = useState([]);\r\n  const [rezervation, setReservation] = useState();\r\n\r\n\r\n  useEffect(() => {\r\n    if (!props.autentification.isAdmin) {\r\n      const userLocalStorage = localStorage.getItem('user');\r\n\r\n      const user = JSON.parse(userLocalStorage);\r\n      const userId = props.autentification.isNewlyweds ? user?.user?.id : props.autentification.isGuest && user.user.brojPozivnice;\r\n\r\n\r\n      const fetchReservations = async () => {\r\n        try {\r\n          const response = await fetch(\r\n            `http://wedease.studenti.sum.ba/rezervacije/get/korisnik/${userId}`\r\n          );\r\n          if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n          }\r\n          const reservations = await response.json();\r\n          console.log(reservations)\r\n          setReservation(reservations);\r\n        } catch (error) {\r\n          console.error('Error fetching reservations for user', error);\r\n        }\r\n      };\r\n\r\n      fetchReservations();\r\n    }\r\n  }, [props.autentification.isNewlyweds]);\r\n\r\n  const editBtnHandler = (table) => {\r\n    setEditTable(table);\r\n    setAddTable(false);\r\n  };\r\n\r\n  const onAddTableHandler = () => {\r\n    setAddTable(!addTable);\r\n    setEditTable(null);\r\n  };\r\n\r\n  const backFromTableMenagment = async (table) => {\r\n    const oldTable = tables.find((t) => t.IDStola === table[0]?.IDStola);\r\n\r\n    if (table && !oldTable) {\r\n      try {\r\n        const response = await fetch('http://wedease.studenti.sum.ba/stolovi/add', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            name: table[0].ImeStola,\r\n            seats: table[0].BrojStolica,\r\n            idSalona: svadbeniSalon.IDSalona,\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        const tableData = data.table;\r\n\r\n        if (tableData) {\r\n          setTables((prevTables) => [...prevTables, tableData]);\r\n        }\r\n      } catch (error) {\r\n        console.error('There was an error!', error);\r\n      }\r\n    }\r\n\r\n    if (oldTable) {\r\n      try {\r\n        const response = await fetch(\r\n          `http://wedease.studenti.sum.ba/stolovi/edit/${oldTable.IDStola}`,\r\n          {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n              name: table[0].ImeStola,\r\n              seats: table[0].BrojStolica,\r\n              idSalona: svadbeniSalon.IDSalona,\r\n            }),\r\n          }\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        const tableData = data.table;\r\n\r\n        if (tableData) {\r\n          setTables((prevTables) =>\r\n            prevTables.map((table) => {\r\n              if (table.IDStola === oldTable.IDStola) {\r\n                return tableData;\r\n              }\r\n\r\n              return table;\r\n            })\r\n          );\r\n        }\r\n      } catch (error) {\r\n        console.error('Error during update:', error);\r\n      }\r\n    }\r\n\r\n    setAddTable(false);\r\n    setEditTable(null);\r\n  };\r\n\r\n  const onReserveSeats = async (tableId, reservedSeats) => {\r\n    const updatedTables = tables.map((table) => {\r\n      if (table.IDStola === tableId) {\r\n        const updatedGuests = table.guests ? [...table.guests] : [];\r\n\r\n        Object.entries(reservedSeats).forEach(([key, name]) => {\r\n          const seat = parseInt(key.split('-')[1], 10);\r\n          const guestIndex = updatedGuests.findIndex(\r\n            (guest) => guest.seat === seat\r\n          );\r\n\r\n          if (guestIndex !== -1) {\r\n            updatedGuests[guestIndex].name = name;\r\n          } else {\r\n            updatedGuests.push({ name, seat });\r\n          }\r\n        });\r\n\r\n        return { ...table, guests: updatedGuests };\r\n      }\r\n      return table;\r\n    });\r\n\r\n    setTables(updatedTables);\r\n\r\n    const res = [];\r\n\r\n    \r\n\r\n    updatedTables.forEach((table) => {\r\n      if (table.IDStola === tableId) {\r\n        table.guests.forEach((guest) => {\r\n          res.push({\r\n            IDStola: tableId,\r\n            IDSvadbe: rezervation[0].IDRezervacije,\r\n            ImeKorisnika: guest.name,\r\n            BrojStolice: guest.seat,\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    try {\r\n      const response = await fetch('http://wedease.studenti.sum.ba/stolice/add', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(res),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok.');\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n    } catch (error) {\r\n      console.error('There was a problem with the fetch operation:', error);\r\n    }\r\n  };\r\n\r\n  async function getSalon(salonID) {\r\n    setSvadbeniSalon(salonID);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `http://wedease.studenti.sum.ba/stolovi/get/${salonID.IDSalona}`\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      setTables(data);\r\n    } catch (error) {\r\n      console.error('Could not fetch the data', error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchTablesData = async () => {\r\n      if (rezervation && rezervation.length > 0) {\r\n        try {\r\n  \r\n          const tablesResponse = await fetch(\r\n            `http://wedease.studenti.sum.ba/stolovi/get/rezervedTables/${rezervation[0].IDRezervacije}`\r\n          );\r\n          if (!tablesResponse.ok) {\r\n            throw new Error(`HTTP error! status: ${tablesResponse.status}`);\r\n          }\r\n          const tables = await tablesResponse.json();\r\n          \r\n          const tablesDetailsPromises = tables.map(table =>\r\n            fetch(`http://wedease.studenti.sum.ba/stolovi/getTablesById/${table.IDStola}`).then(res => res.json())\r\n          );\r\n          const detailedTables = await Promise.all(tablesDetailsPromises);\r\n  \r\n\r\n          const guestsResponse = await fetch(`http://wedease.studenti.sum.ba/stolice/get/${rezervation[0].IDRezervacije}`);\r\n          if (guestsResponse.ok) {\r\n            const tablesData = await guestsResponse.json();\r\n          \r\n            const tablesGuestsMap = {};\r\n            tablesData.forEach((reservation) => {\r\n              if (!tablesGuestsMap[reservation.IDStola]) {\r\n                tablesGuestsMap[reservation.IDStola] = [];\r\n              }\r\n              tablesGuestsMap[reservation.IDStola].push({\r\n                name: reservation.ImeKorisnika,\r\n                seat: reservation.BrojStolice,\r\n              });\r\n            });\r\n  \r\n            const updatedTables = detailedTables.map((table) => {\r\n              return {\r\n                ...table[0],\r\n                guests: tablesGuestsMap[table[0].IDStola] || [],\r\n              };\r\n            });\r\n\r\n  \r\n            setTables(updatedTables);\r\n          } else {\r\n            console.log(detailedTables)\r\n            setTables(...detailedTables);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching tables data', error);\r\n        }\r\n      }\r\n    };\r\n  \r\n    if (rezervation) {\r\n      fetchTablesData();\r\n    }\r\n  }, [rezervation]);\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar\r\n        autentification={props.autentification}\r\n        logoutUser={props.logoutUser}\r\n      />\r\n      <div className='containerSeatingArragment'>\r\n        {props.autentification.isAdmin && (\r\n          <>\r\n            <div className='chooseSalonFlex'>\r\n              <ChooseSalon getSalon={getSalon} />\r\n            </div>\r\n            {svadbeniSalon && (\r\n              <>\r\n                <button\r\n                  type='submit'\r\n                  className=' addTableButton'\r\n                  onClick={onAddTableHandler}\r\n                  disabled={editTable}\r\n                >\r\n                  Dodaj stol\r\n                </button>\r\n                {(editTable || addTable) && (\r\n                  <AddTable\r\n                    table={editTable}\r\n                    backFromTableMenagment={backFromTableMenagment}\r\n                  />\r\n                )}\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n        <div className='row'>\r\n          {tables?.map((table) => {\r\n            return (\r\n              <div className='col-lg-4 col-md-6 col-sm-12 mb-10 arragmentSeat'>\r\n                <div className='card justify-content-center align-items-center'>\r\n                  <div className='card-body'>\r\n                    <div className='seatingArragmentCardHeader'>\r\n                      <h5 className='card-title tableTitle'>\r\n                        {table.ImeStola}\r\n                      </h5>\r\n                      {props.autentification.isAdmin && (\r\n                        <button\r\n                          className='seatingArragmentEditBtn'\r\n                          onClick={() => editBtnHandler(table)}\r\n                          disabled={addTable}\r\n                        >\r\n                          Uredi\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                    <TableComponent\r\n                      table={table}\r\n                      onReserveSeats={onReserveSeats}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}